% !TEX TS-program = pdflatex -shell-escape
% !TEX encoding = UTF-8 Unicode
% !TEX spellcheck = en-US

% Example: $ pdflatex -jobname=expected_output -shell-escape example.tex

% Simplified BSD License (c) 2013, Andrew Pinkham

% provide information for the document title
\title{Examples of Code Listings in \LaTeX{}}
\author{Andrew Pinkham} % use \and between authors if multiple
\date{\today}

% import preamble.tex
% allows us to use packages imported in file
% as well as any macro's we've created
\input{preamble}

% start the actual document
\begin{document}

% create a title using the title, author, and date info above
\maketitle

\begin{abstract}
This is a short file to test the various features and shortcuts built in our preamble file. The purpose is to provide \TeX{} files with their output in a PDF. Users may then easily read, learn, or simply copy from the \TeX{} files to jumstart their projects.

Note that all code is licensed under the Simplified BSD License, a copy of which is included with the project code, found \link{https://github.com/jambonrose/latex-code-example}{on github}.
\end{abstract}

\tableofcontents

\section{Code Listing}

\subsection{\texttt{verbatim} Environment}

Here is an example that uses \LaTeX 's \verb|verbatim| environment.

\begin{verbatim}
from django.db import models

class Poll(models.Model):
    question = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published')

class Choice(models.Model):
    poll = models.ForeignKey(Poll)
    choice_text = models.CharField(max_length=200)
    votes = models.IntegerField(default=0)
\end{verbatim}

Note that the quotes used are standard programming quotes, as opposed to \LaTeX 's backtick-quote combination. This is possible because of the \verb|upquote| package, included in the preamble of the document.

\LaTeX{} further supplies the \verb|\verb| command, allowing for inline \verb|verbatim| formatting.

Finally, note that the \verb|\verb| command can only be used in captions if the entire command is preceded by the \verb|\cprotect| command, included in the \verb|cprotect| package, which you can read more about \link{http://www.ctan.org/tex-archive/macros/latex/contrib/cprotect}{on the documentation provided by CTAN}. On a related note, text in chapter titles (or section, subsection, etc) are formatted with \verb|\texttt| in this document, as the use of \verb|\verb| in these areas appears to conflict with the \verb|hyperref| package.

\subsection{\texttt{listings} Package}

The following uses the \verb|listings| package to create an environment.

\noindent\minipage{\linewidth} % this avoids the code below being split across the page
\begin{lstlisting}[aboveskip=\baselineskip,%
                   basicstyle=\ttfamily,%
                   belowskip=\baselineskip,%
                   caption={models.py from Django Tutorial},%
                   columns=fixed,%
                   firstnumber=1,%
                   frame=single,%
                   label=code:django:models_basic_listing,%
                   language=Python,%
                   numbers=left,%
                   showstringspaces=false,%
                   showspaces=false]
from django.db import models

class Poll(models.Model):
    question = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published')

class Choice(models.Model):
    poll = models.ForeignKey(Poll)
    choice_text = models.CharField(max_length=200)
    votes = models.IntegerField(default=0)
\end{lstlisting}
\endminipage % ends the samepage environment mentioned before the listing

On top of an environment, the \lstinline{listings} package also provides a way to format inline text using \lstinline|\lstinline{}|, replacing the \lstinline{verb} command. Note that the settings for \lstinline|\lstinline{}| must be set in the options of \lstinline|\lstset{}| in the preamble. For more on the \lstinline{listings} package, please see \link{https://en.wikibooks.org/wiki/LaTeX/Source_Code_Listings}{the wikibook on the subject}, or else \link{http://www.ctan.org/tex-archive/macros/latex/contrib/listings/}{the documentation provided by CTAN.}
Note that while not discussed here, it is possible to create a list of listings (a table of contents of all the listings).

\subsection{\texttt{Minted} Package}

The last environment I'll demonstrate is the \verb|minted| package. It takes code in the environment, and runs it through Python's \verb|pygments| library. The resulting colored \LaTeX{} syntax is placed in a \verb|verbatim| environment.

\begin{minted}{python}
from django.db import models

class Poll(models.Model):
    question = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published')

class Choice(models.Model):
    poll = models.ForeignKey(Poll)
    choice_text = models.CharField(max_length=200)
    votes = models.IntegerField(default=0)
\end{minted}

While \verb|minted| does not provide an inline formatting command, it does provide a shortcut command \verb|mint| for short code snippets.

\mint{python}/fib = lambda n: n if n < 2 else fib(n-1) + fib(n-2)/

The \verb|minted| environment also provides the ability to be inserted into listings, with labels and captions.

\begin{listing}[H]
\begin{minted}{python}
from django.db import models

class Poll(models.Model):
    question = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published')

class Choice(models.Model):
    poll = models.ForeignKey(Poll)
    choice_text = models.CharField(max_length=200)
    votes = models.IntegerField(default=0)
\end{minted}
\caption{models.py from Django Tutorial}
\label{code:django:models_basic_minted}
\end{listing}

\listoflistings

\begin{center}
Simplified BSD License \textcopyright 2013, Andrew Pinkham
 \end{center}

\end{document}
